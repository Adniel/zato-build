---

  - name: Install additional software on Debian-based systems
    apt: name={{ item }} state=present
    with_items:
      - git
      - curl
      - apt-transport-https
      - python-software-properties
      - gdebi
      - libpq-dev
      - libxml2-dev
      - libxslt1-dev
      - python-dev
      - libyaml-dev
    when: ansible_os_family == "Debian" and ansible_pkg_mgr == 'apt'

  - name: Install software-properties-common on Ubuntu
    apt: name=software-properties-common state=present
    when: ansible_distribution == "Ubuntu"

  - name: Install common packages on Centos
    yum: name={{ item }} state=present
    with_items:
      - epel-release
      - curl
      - git
      - gcc
      - make
      - openssl-devel
      - postgresql-devel
      - sqlite-devel
    when: ansible_distribution == "CentOS"

  - name: Install additional software on CentOS 6
    yum: name={{ item }} state=present
    with_items:
      - libev
      - libev-devel
      - libffi
      - libffi-devel
      - bzip2
      - bzip2-devel
    when: ansible_distribution == "CentOS" and ansible_distribution_version.split('.')[0]|int == 6

  - name: Install pip on Centos 7
    easy_install: name=pip
    when: ansible_distribution == "CentOS" and ansible_distribution_version.split('.')[0]|int == 7
