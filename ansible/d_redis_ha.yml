---

# This playbook installs Redis and configures HA with Redis sentinels.

- hosts: redis-ha
  become: True
  vars:
    ansible_host: "{{ hostvars[inventory_hostname]['ip'] }}"
    ansible_ssh_private_key_file:
      ./files/vagrant_key/distributed/{{ hostvars[inventory_hostname]['inventory_hostname'] }}_private_key

  roles:

    - install_redis
    - configure_redis_ha
